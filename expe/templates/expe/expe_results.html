{% extends 'base.html' %}

{% load staticfiles %}

{% block title %}
    Expe {{ expe_name }}
{% endblock %}

{% block content %}
    
    <h3>Results files of experiences</h3>
    <br />

    <div class="results-expe">

        {% if expe %}
            <h4>{{expe}}</h4>

            <br/>
            {% if folders %}

                <ul class="list-group">

                {% for name, folder in folders.items %} 
                    
                        <li class="list-group-item">
                            
                            <div class="row">
                                <div class="col-md-10">{{name}} </div>
                                <div class="col-md-1 download-list" data-download-path="{{expe}}/{{name}}"><i class="fas fa-download"></i></div>
                                <div class="col-md-1 date-folder-list"><i class="fas fa-arrow-circle-right"></i></div>
                            </div>
                            
                            <ul class="list-group files-list" style="display: none">

                                <hr />
                                {% for file in folder %}
                                    <li class="list-group-item">
                                    
                                        <div class="row">
                                            <div class="col-md-11">{{file}} </div>
                                            <div class="col-md-1 download-list" data-download-path="{{expe}}/{{name}}/{{file}}"><i class="fas fa-download"></i></div>
                                        </div>
                                                
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                {% endfor %}

                </ul>
            {% csrf_token %}

            {% else %}
                <div class="alert alert-warning" role="alert">
                    <i>Expe folder is empty</i>
                </div>
            {% endif %}
        {% else %}
             {% for f in folders %}
                <ul class="list-group">
                    <li class="list-group-item"><a href="{% url 'expe:results_expe' expe=f %}">{{f}}</a></li>
                </ul>
            {% endfor %}
        {% endif %}
    </div>

    {% block javascripts %}
         <script type="text/javascript"> 
            // Utils informations
            var expe_name = "{{expe}}"
        </script>
        <script src="{% static "js/results.js" %}"></script>
        <script src="{% static "js/FileSaver.js" %}"></script>
    {% endblock %}
{% endblock %}
